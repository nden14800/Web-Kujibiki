<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>今日の運勢くじ</title>
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Google Sans', sans-serif;
        }
        .kuji-result {
            display: none;
        }
        .description-box {
            display: none;
        }
        .button-animation {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .button-animation:hover {
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 6px 10px rgba(0, 0, 0, 0.2);
        }
        .fade-in {
            animation: fadeIn 1s ease forwards;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        /* Define CSS variables for theming */
        :root {
            --background-color: #ffffff; /* ライトモードの背景色 */
            --text-color: #000000; /* ライトモードの文字色 */
            --button-color: #e5e7eb; /* ライトモードのボタン色 (gray-200) */
            --button-text-color: #000000; /* ライトモードのボタン文字色 */
        }
        body {
            background-color: var(--background-color);
            color: var(--text-color);
        }
        .kuji-result, .description-box {
            background-color: var(--background-color);
            color: var(--text-color);
        }
        h1, h2 {
            color: var(--text-color);
        }
        .button-animation {
            background-color: var(--button-color);
            color: var(--button-text-color);
        }
        .button-animation:hover {
            background-color: #d4d4d8; /* ホバー時のボタン色 (gray-300) */
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'kuji-red': '#FF4500',
                        'kuji-blue': '#4169E1',
                        'kuji-yellow': '#FFD700',
                        'kuji-green': '#3CB371',
                        'kuji-purple': '#800080',
                        'kuji-pink': '#FF69B4',
                    },
                },
            },
        }
    </script>
</head>
<body class="min-h-screen flex flex-col items-center justify-start pt-12">
    <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-kuji-red mb-8 text-center tracking-wider drop-shadow-lg">
        今日の運勢
    </h1>

    <div id="kuji-result" class="kuji-result bg-white rounded-2xl shadow-xl p-6 text-center mb-8 max-w-md w-full border-2 border-kuji-yellow">
        <h2 class="text-2xl sm:text-3xl font-semibold text-kuji-blue mb-4 fade-in">今日の運勢は...</h2>
        <p id="result-text" class="text-xl sm:text-2xl font-bold text-kuji-red fade-in"></p>
    </div>

    <div id="description-box" class="description-box bg-white rounded-2xl shadow-xl p-6 text-center mb-8 max-w-md w-full border-2 border-kuji-green">
        <h2 class="text-2xl sm:text-3xl font-semibold text-kuji-green mb-4 fade-in">くじの説明</h2>
        <div id="description-content" class="text-lg sm:text-xl text-gray-700 fade-in text-left">
        </div>
    </div>

    <div class="flex flex-col sm:flex-row gap-4 justify-center mb-8">
        <button id="draw-kuji" class="button-animation bg-kuji-red hover:bg-red-600 text-white font-bold rounded-xl py-3 px-6 text-lg shadow-md">
            くじを引く
        </button>
        <button id="show-description" class="button-animation bg-kuji-blue hover:bg-blue-600 text-white font-bold rounded-xl py-3 px-6 text-lg shadow-md">
            くじの説明
        </button>
        <button id="show-about" class="button-animation bg-kuji-green hover:bg-green-600 text-white font-bold rounded-xl py-3 px-6 text-lg shadow-md">
            結果について
        </button>
    </div>

    <p class="text-md sm:text-lg text-gray-600 text-center max-w-xl">
        ※このくじは、何度でも引けますが、今日の運勢くじなので、1回目の結果を参考にしてください。それ以降は、参考にはしないでください。
    </p>

    <script>
        const results = [
            "大吉", "中吉", "小吉", "吉", "半吉", "末吉", "末小吉", "凶", "小凶", "半凶", "末凶", "大凶"
        ];

        const descriptions = [
            "最高の運勢です！何をやってもうまくいくでしょう。積極的に行動しましょう。",
            "とても良い運勢です。周りの人との協力が成功の鍵となります。",
            "良い運勢です。小さな幸せを見つけられるでしょう。",
            "まずまずの運勢です。努力が報われるでしょう。",
            "少し良い運勢です。焦らずゆっくり進みましょう。",
            "これからの運勢に期待しましょう。今は準備の時です。",
            "ほんの少し良い運勢です。油断せずに行きましょう。",
            "少し悪い運勢です。無理はしないようにしましょう。",
            "悪い運勢です。慎重に行動しましょう。",
            "とても悪い運勢です。今は耐える時です。",
            "非常に悪い運勢です。何事にも注意が必要です。",
            "最悪の運勢です。今は静かに過ごしましょう。"
        ];

        const aboutText = `このくじは、今日のあなたの運勢を占うものです。
結果はあくまで参考として、前向きな気持ちで一日を過ごしましょう。
良い結果が出ても油断せず、悪い結果が出ても落ち込まず、努力を続けることが大切です。`;

        const resultElement = document.getElementById("result-text");
        const kujiResultElement = document.getElementById("kuji-result");
        const drawKujiButton = document.getElementById("draw-kuji");
        const descriptionBox = document.getElementById("description-box");
        const descriptionContent = document.getElementById("description-content");
        const showDescriptionButton = document.getElementById("show-description");
        const showAboutButton = document.getElementById("show-about");

        // Define a function to update the background color
        function updateBackgroundColor() {
            // Check if the user prefers dark mode
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                // Set dark mode colors
                document.documentElement.style.setProperty('--background-color', '#000000');
                document.documentElement.style.setProperty('--text-color', '#ffffff');
                document.documentElement.style.setProperty('--button-color', '#4a5568');
                document.documentElement.style.setProperty('--button-text-color', '#ffffff');
            } else {
                // Set light mode colors
                document.documentElement.style.setProperty('--background-color', '#ffffff');
                document.documentElement.style.setProperty('--text-color', '#000000');
                document.documentElement.style.setProperty('--button-color', '#e5e7eb');
                document.documentElement.style.setProperty('--button-text-color', '#000000');
            }
            // Apply the CSS variables to the styles
            document.documentElement.style.setProperty('--button-hover-color', getButtonHoverColor());
            updateButtonStyles();
        }

        // Function to determine button hover color based on current button color
        function getButtonHoverColor() {
            const buttonColor = getComputedStyle(document.documentElement).getPropertyValue('--button-color').trim();
            if (buttonColor === '#4a5568') {
                return '#718096';
            } else {
                return '#d4d4d8';
            }
        }

        // Function to update button styles
        function updateButtonStyles() {
            const buttons = document.querySelectorAll('.button-animation');
            buttons.forEach(button => {
                button.style.backgroundColor = getComputedStyle(document.documentElement).getPropertyValue('--button-color');
                button.style.color = getComputedStyle(document.documentElement).getPropertyValue('--button-text-color');
            });
        }

        // Call the function on initial load
        updateBackgroundColor();

        // Listen for changes in the user's color scheme preference
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateBackgroundColor);


        function drawKuji() {
            const randomIndex = Math.floor(Math.random() * results.length);
            const result = results[randomIndex];
            resultElement.textContent = result;
            kujiResultElement.classList.add("fade-in", "block");
            kujiResultElement.style.display = "block";

        }

        function showDescription() {
            if (descriptionBox.style.display === "block") {
                descriptionBox.style.display = "none";
                descriptionContent.innerHTML = "";
            } else {
                descriptionBox.style.display = "block";
                let descriptionText = "<ul class='list-disc list-inside space-y-2'>";
                results.forEach((result, index) => {
                    descriptionText += `<li><span class="font-semibold">${result}</span>：${descriptions[index]}</li>`;
                });
                descriptionText += "</ul>";
                descriptionContent.innerHTML = descriptionText;
                descriptionBox.classList.add("fade-in");
            }
        }

        function showAbout() {
            if (descriptionBox.style.display === "block") {
                descriptionBox.style.display = "none";
                descriptionContent.innerHTML = "";
            } else {
                descriptionBox.style.display = "block";
                descriptionContent.textContent = aboutText;
                descriptionBox.classList.add("fade-in");
            }
        }

        drawKujiButton.addEventListener("click", drawKuji);
        showDescriptionButton.addEventListener("click", showDescription);
        showAboutButton.addEventListener("click", showAbout);
    </script>
</body>
</html>
